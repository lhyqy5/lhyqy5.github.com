
<!DOCTYPE HTML>
<html>
<head>
	<meta charset="utf-8">
	<title>commont note - My Octopress Blog</title>
	<meta name="author" content="lhyqy5">

	
	<meta name="description" content="位运算应用口诀
清零取反要用与，某位置一可用或
若要取反和交换，轻轻松松用异或
移位运算
要点 1 它们都是双目运算符，两个运算分量都是整形，结果也是整形。 2 " &lt; &lt;" 左移：右边空出的位上补0，左边的位将从字头挤掉，其值相当于乘2。 3 "&gt;&gt;"右移：右边的位被挤掉 &hellip;">
	
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

	<link href="/atom.xml" rel="alternate" title="My Octopress Blog" type="application/atom+xml">
	<link rel="canonical" href="">
	<link href="/favicon.png" rel="shortcut icon">
	<link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
	<!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
	<script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
	
</head>

<body>
	<header id="header" class="inner"><h1><a href="/">My Octopress Blog</a></h1>
<nav id="main-nav"><ul class="main">
	<li><a href="/">Blog</a></li>
	<li><a href="/blog/archives">Archives</a></li>
</ul>
</nav>
<nav id="mobile-nav">
	<div class="alignleft menu">
		<a class="button">Menu</a>
		<div class="container"><ul class="main">
	<li><a href="/">Blog</a></li>
	<li><a href="/blog/archives">Archives</a></li>
</ul>
</div>
	</div>
	<div class="alignright search">
		<a class="button"></a>
		<div class="container">
			<form action="http://google.com/search" method="get">
				<input type="text" name="q" results="0">
				<input type="hidden" name="q" value="site:lhyqy5.github.com">
			</form>
		</div>
	</div>
</nav>
<nav id="sub-nav" class="alignright">
	<div class="social">
		
		
		<a class="google" href="https://plus.google.com/116059798600981337340?rel=author" title="Google+">Google+</a>
		
		
		<a class="twitter" href="http://twitter.com/lhyqy5" title="Twitter">Twitter</a>
		
		
		
		
		
		
		<a class="rss" href="/atom.xml" title="RSS">RSS</a>
		
	</div>
	<form class="search" action="http://google.com/search" method="get">
		<input class="alignright" type="text" name="q" results="0">
		<input type="hidden" name="q" value="site:lhyqy5.github.com">
	</form>
</nav>

</header>
	
		
	
	<div id="content" class="inner"><article class="post">
	<h1 class="title">Commont Note</h1>
	<div class="entry-content"><p>位运算应用口诀
清零取反要用与，某位置一可用或
若要取反和交换，轻轻松松用异或
移位运算
要点 1 它们都是双目运算符，两个运算分量都是整形，结果也是整形。</p>

<pre><code>2 " &lt; &lt;" 左移：右边空出的位上补0，左边的位将从字头挤掉，其值相当于乘2。 
3 "&gt;&gt;"右移：右边的位被挤掉。对于左边移出的空位，如果是正数则空位补0，若为负数，可能补0或补1，这取决于所用的计算机系统。 
4 "&gt;&gt;&gt;"运算符，右边的位被挤掉，对于左边移出的空位一概补上0。 
</code></pre>

<p>位运算符的应用 (源操作数s 掩码mask)
(1) 按位与&#8211; &amp;
1 清零特定位 (mask中特定位置0，其它位为1，s=s&amp;mask)
2 取某数中指定位 (mask中特定位置1，其它位为0，s=s&amp;mask)
(2) 按位或&#8211; |</p>

<pre><code>常用来将源操作数某些位置1，其它位不变。 (mask中特定位置1，其它位为0 s=s |mask) 
</code></pre>

<p>(3) 位异或&#8211; ^
1 使特定位的值取反 (mask中特定位置1，其它位为0 s=s<sup>mask)</sup>
2 不引入第三变量，交换两个变量的值 (设 a=a1,b=b1)</p>

<pre><code>目 标          操 作              操作后状态 
</code></pre>

<p>a=a1<sup>b1</sup>        a=a<sup>b</sup>              a=a1<sup>b1,b=b1</sup>
b=a1<sup>b1<sup>b1</sup></sup>      b=a<sup>b</sup>              a=a1<sup>b1,b=a1</sup>
a=b1<sup>a1<sup>a1</sup></sup>      a=a<sup>b</sup>              a=b1,b=a1
二进制补码运算公式：
-x = ~x + 1 = ~(x-1)
~x = -x-1
-(~x) = x+1
~(-x) = x-1
x+y = x - ~y - 1 = (x |y)+(x&amp;y)
x-y = x + ~y + 1 = (x |~y)-(~x&amp;y)
x<sup>y</sup> = (x |y)-(x&amp;y)
x |y = (x&amp;~y)+y
x&amp;y = (~x |y)-~x
x==y:    ~(x-y |y-x)
x!=y:    x-y |y-x
x &lt; y:    (x-y)<sup>((x<sup>y)&amp;((x-y)<sup>x))</sup></sup></sup>
x &lt;=y:    (x |~y)&amp;((x<sup>y)</sup> |~(y-x))
x &lt; y:    (~x&amp;y) |((~x |y)&amp;(x-y))//无符号x,y比较
x &lt;=y:    (~x |y)&amp;((x<sup>y)</sup> |~(y-x))//无符号x,y比较
应用举例
(1) 判断int型变量a是奇数还是偶数          <br/>
a&amp;1  = 0 偶数</p>

<pre><code>  a&amp;1 =  1 奇数 
</code></pre>

<p>(2) 取int型变量a的第k位 (k=0,1,2……sizeof(int))，即a>>k&amp;1
(3) 将int型变量a的第k位清0，即a=a&amp;~(1 &lt; &lt;k)
(4) 将int型变量a的第k位置1， 即a=a |(1 &lt; &lt;k)
(5) int型变量循环左移k次，即a=a &lt; <k |a>>16-k  (设sizeof(int)=16)
(6) int型变量a循环右移k次，即a=a>>k |a &lt; &lt;16-k  (设sizeof(int)=16)
(7)整数的平均值
对于两个整数x,y，如果用 (x+y)/2 求平均值，会产生溢出，因为 x+y 可能会大于INT_MAX，但是我们知道它们的平均值是肯定不会溢出的，我们用如下算法：
int average(int x, int y)  //返回X,Y 的平均值
{</p>

<pre><code>return (x&amp;y)+((x^y)&gt;&gt;1); 
</code></pre>

<p>}
(8)判断一个整数是不是2的幂,对于一个数 x >= 0，判断他是不是2的幂
boolean power2(int x)
{</p>

<pre><code>return ((x&amp;(x-1))==0)&amp;&amp;(x!=0)； 
</code></pre>

<p>}
(9)不用temp交换两个整数
void swap(int x , int y)
{</p>

<pre><code>x ^= y; 
y ^= x; 
x ^= y; 
</code></pre>

<p>}
(10)计算绝对值
int abs( int x )
{
int y ;
y = x >> 31 ;
return (x<sup>y)-y</sup> ;        //or: (x+y)<sup>y</sup>
}
(11)取模运算转化成位运算 (在不产生溢出的情况下)</p>

<pre><code>    a % (2^n) 等价于 a &amp; (2^n - 1) 
</code></pre>

<p>(12)乘法运算转化成位运算 (在不产生溢出的情况下)</p>

<pre><code>    a * (2^n) 等价于 a &lt; &lt; n 
</code></pre>

<p>(13)除法运算转化成位运算 (在不产生溢出的情况下)</p>

<pre><code>    a / (2^n) 等价于 a&gt;&gt; n 
    例: 12/8 == 12&gt;&gt;3 
</code></pre>

<p>(14) a % 2 等价于 a &amp; 1      <br/>
(15) if (x == a) x= b;
　　          else x= a;
　　      等价于 x= a ^ b ^ x;
(16) x 的 相反数 表示为 (~x+1)</p>

<p>实例</p>

<pre><code>功能              |          示例            |    位运算 
</code></pre>

<p>&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;-+&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;+&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8211;
去掉最后一位          | (101101->10110)          | x >> 1
在最后加一个0        | (101101->1011010)        | x &lt; &lt; 1
在最后加一个1        | (101101->1011011)        | x &lt; &lt; 1+1
把最后一位变成1      | (101100->101101)          | x | 1
把最后一位变成0      | (101101->101100)          | x | 1-1
最后一位取反          | (101101->101100)          | x ^ 1
把右数第k位变成1      | (101001->101101,k=3)      | x | (1 &lt; &lt; (k-1))
把右数第k位变成0      | (101101->101001,k=3)      | x &amp; ~ (1 &lt; &lt; (k-1))
右数第k位取反        | (101001->101101,k=3)      | x ^ (1 &lt; &lt; (k-1))
取末三位              | (1101101->101)            | x &amp; 7
取末k位              | (1101101->1101,k=5)      | x &amp; ((1 &lt; &lt; k)-1)</p>

<p>取右数第k位          | (1101101->1,k=4)          | x >> (k-1) &amp; 1</p>

<p>把末k位变成1          | (101001->101111,k=4)      | x | (1 &lt; &lt; k-1)
末k位取反            | (101001->100110,k=4)      | x ^ (1 &lt; &lt; k-1)
把右边连续的1变成0    | (100101111->100100000)    | x &amp; (x+1)
把右起第一个0变成1    | (100101111->100111111)    | x | (x+1)
把右边连续的0变成1    | (11011000->11011111)      | x | (x-1)
取右边连续的1        | (100101111->1111)        | (x ^ (x+1)) >> 1
去掉右起第一个1的左边 | (100101000->1000)        | x &amp; (x ^ (x-1))
判断奇数      (x&amp;1)==1
判断偶数 (x&amp;1)==0</p>

<p>例如求从x位（高）到y位（低）间共有多少个1</p>

<p>public static int FindChessNum(int x, int y, ushort k)</p>

<pre><code>    { 
        int re = 0; 
        for (int i = y; i &lt;= x; i++) 
        { 
            re += ((k &gt;&gt; (i - 1)) &amp; 1); 
        } 
        return re; 
    } 
</code></pre>
</div>


<div class="meta">
	<div class="date">








  


<time datetime="2012-06-12T18:30:00+08:00" pubdate data-updated="true">Jun 12<span>th</span>, 2012</time></div>
	<div class="tags">

</div>
	
</div></article>

	<div class="share">
	<div class="addthis_toolbox addthis_default_style ">
	
	
	<a class="addthis_button_tweet"></a>
	
	
	<a class="addthis_button_google_plusone" g:plusone:size="medium"></a>
	
	<a class="addthis_counter addthis_pill_style"></a>
	</div>
  <script type="text/javascript" src="http://s7.addthis.com/js/250/addthis_widget.js#pubid="></script>
</div>



<section id="comment">
    <h1 class="title">Comments</h1>
    <div id="disqus_thread" aria-live="polite"><noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>
</section>
</div>
	<footer id="footer" class="inner">Copyright &copy; 2012

    lhyqy5

</footer>
	<script src="/javascripts/slash.js"></script>
<script src="/javascripts/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
(function($){
	$('.fancybox').fancybox();
})(jQuery);
</script> <!-- Delete or comment this line to disable Fancybox -->


<script type="text/javascript">
      var disqus_shortname = 'lhyqy5';
      
        
        // var disqus_developer = 1;
        var disqus_identifier = 'http://lhyqy5.github.com/blog/2012/06/12/commont-note/';
        var disqus_url = 'http://lhyqy5.github.com/blog/2012/06/12/commont-note/';
        var disqus_script = 'embed.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>





</body>
</html>